(()=>{"use strict";var e={56:(e,r,n)=>{e.exports=function(e){var r=n.nc;r&&e.setAttribute("nonce",r)}},72:e=>{var r=[];function n(e){for(var n=-1,t=0;t<r.length;t++)if(r[t].identifier===e){n=t;break}return n}function t(e,t){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],A=t.base?l[0]+t.base:l[0],p=i[A]||0,d="".concat(A," ").concat(p);i[A]=p+1;var c=n(d),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==c)r[c].references++,r[c].updater(g);else{var m=a(g,t);t.byIndex=s,r.splice(s,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function a(e,r){var n=r.domAPI(r);return n.update(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap&&r.supports===e.supports&&r.layer===e.layer)return;n.update(e=r)}else n.remove()}}e.exports=function(e,a){var i=t(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);r[s].references--}for(var l=t(e,a),A=0;A<i.length;A++){var p=n(i[A]);0===r[p].references&&(r[p].updater(),r.splice(p,1))}i=l}}},113:e=>{e.exports=function(e,r){if(r.styleSheet)r.styleSheet.cssText=e;else{for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(document.createTextNode(e))}}},208:(e,r,n)=>{n.d(r,{A:()=>s});var t=n(354),a=n.n(t),i=n(314),o=n.n(i)()(a());o.push([e.id,':root {\n  --bg: #0b0b0b;\n  --fg: #f5f5f5;\n  --muted: #a3a3a3;\n  --stroke: #333;\n  --radius: 10px;\n  --gap: 16px;\n  color-scheme: dark\n}\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box\n}\n\nhtml,\nbody {\n  height: 100%\n}\n\nbody {\n  margin: 0;\n  background: var(--bg);\n  color: var(--fg);\n  font: 15px/1.6 "Courier New", Courier, monospace\n}\n\n/* Layout */\n.container {\n  display: grid;\n  grid-template-columns: 340px 1fr;\n  gap: 24px;\n  align-items: start;\n  padding: 16px\n}\n\n.container>* {\n  min-width: 0\n}\n\n/* prevent grid blowout */\n@media (max-width:900px) {\n  .container {\n    grid-template-columns: 1fr\n  }\n}\n\n.sidebar {\n  display: grid;\n  gap: 14px;\n  align-content: start\n}\n\n.preview {\n  min-width: 0\n}\n\n/* Shared surface */\n.controls,\n.status,\n.col,\n.log,\nimg,\ncanvas,\na {\n  border: 1px solid var(--stroke);\n  border-radius: var(--radius)\n}\n\nimg,\ncanvas {\n  display: block;\n  width: 100%;\n  height: auto;\n  background: var(--bg);\n  max-height: 85vh;\n  object-fit: contain\n}\n\n/* Header */\n.page-header {\n  display: grid;\n  gap: 6px\n}\n\n.page-header h1 {\n  margin: 0;\n  font-size: clamp(1.1rem, 1rem + 1vw, 1.6rem);\n  font-weight: 700\n}\n\n.subtitle {\n  margin: 0;\n  color: var(--muted);\n  font-size: .95rem\n}\n\n/* Controls */\n.controls {\n  display: grid;\n  gap: 12px;\n  padding: 12px;\n  background: rgba(255, 255, 255, .02);\n  grid-auto-rows: min-content\n}\n\n.control {\n  display: grid;\n  gap: 6px\n}\n\n.label {\n  font-size: .85rem;\n  color: var(--muted)\n}\n\ninput[type=file],\nselect,\nbutton,\na {\n  background: transparent;\n  color: var(--fg);\n  font-size: 14px;\n  padding: 10px 12px;\n  border: 1px solid var(--stroke);\n  border-radius: var(--radius);\n  max-width: 100%\n}\n\nbutton {\n  cursor: pointer\n}\n\nbutton:hover:not(:disabled),\na:hover {\n  background: var(--fg);\n  color: var(--bg)\n}\n\nbutton:disabled {\n  opacity: .6;\n  cursor: not-allowed\n}\n\n/* File input: truncate long filenames */\n/* Replace your file input block with this minimal set */\ninput[type=file] {\n  width: 100%;\n  max-width: 100%;\n  min-width: 0;\n  white-space: nowrap;\n  overflow: hidden\n}\n\ninput[type=file]:hover,\ninput[type=file]:focus {\n  overflow: auto\n}\n\n/* reveals full name via horizontal scroll */\n\ninput[type=file]::file-selector-button,\ninput[type=file]::-webkit-file-upload-button {\n  margin-right: 8px;\n  padding: 8px 10px;\n  border: 1px solid var(--stroke);\n  border-radius: var(--radius);\n  background: rgba(255, 255, 255, .06);\n  color: var(--fg);\n  cursor: pointer\n}\n\n\n/* Select (dark popup) */\nselect {\n  background: #111;\n  color: var(--fg);\n  color-scheme: dark;\n  appearance: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  white-space: nowrap\n}\n\nselect option,\nselect optgroup {\n  background: #111;\n  color: var(--fg)\n}\n\nselect:focus {\n  outline: none;\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, .08) inset\n}\n\n/* Status + log */\n.status {\n  padding: 10px 12px;\n  background: rgba(255, 255, 255, .04)\n}\n\n.log {\n  white-space: pre-wrap;\n  font-size: .9rem;\n  padding: 8px 10px;\n  display: none\n}\n\n.log:not(:empty) {\n  display: block\n}\n\n/* Preview area */\n.row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: var(--gap);\n  align-items: start\n}\n\n@media (max-width:900px) {\n  .row {\n    grid-template-columns: 1fr\n  }\n}\n\n.col {\n  display: grid;\n  gap: 12px;\n  padding: 12px;\n  background: rgba(255, 255, 255, .02)\n}\n\n.col h3 {\n  margin: 0;\n  font-weight: 700;\n  font-size: 1rem\n}\n\n/* Utils */\na {\n  text-decoration: none;\n  display: inline-block\n}\n\n.hidden {\n  display: none !important\n}\n\n/* ===== Compact Palette Board ===== */\n:root{\n  --pv-tile: 32px;   /* size of each square */\n  --pv-gap: 8px;     /* spacing between squares */\n  --pv-cols: 8;      /* default columns; change per container if desired */\n}\n\n/* Scope the board with data-palette and .pv-compact */\n[data-palette].pv-compact {\n  /* allow grid to be only as wide as its content (so it doesn\'t fill the row) */\n  display: block;\n  width: max-content;\n  max-width: 100%;    /* prevent overflow on tiny viewports */\n  overflow: hidden;   /* clip if needed */\n  padding: 6px;       /* optional inner padding to match your box drawing */\n  border-radius: var(--radius);\n  border: 1px solid var(--stroke);\n  background: transparent;\n}\n\n[data-palette].pv-compact .pv-grid{\n  display: inline-grid;                                  /* grid sizes to content */\n  grid-template-columns: repeat(var(--pv-cols), var(--pv-tile));\n  grid-auto-rows: var(--pv-tile);\n  gap: var(--pv-gap);\n  justify-content: start;                                /* leftover space stays on right */\n  align-content: start;\n}\n\n[data-palette].pv-compact .pv-item{\n  width: var(--pv-tile);\n  height: var(--pv-tile);\n  border-radius: 4px;\n  border: 1px solid var(--stroke);\n  padding: 0;\n  background: transparent;\n  cursor: pointer;\n  transition: transform .06s ease, box-shadow .06s ease;\n}\n\n[data-palette].pv-compact .pv-item:hover{\n  transform: translateY(-1px);\n  box-shadow: 0 2px 6px rgba(0,0,0,.25);\n}\n\n[data-palette].pv-compact .pv-item:focus-visible{\n  outline: 2px solid #4C9AFF;\n  outline-offset: 2px;\n}\n\n/* we only show the swatch; hide any labels if present */\n[data-palette].pv-compact .pv-labels,\n[data-palette].pv-compact .pv-name,\n[data-palette].pv-compact .pv-rgba,\n[data-palette].pv-compact .pv-title { display: none !important; }\n\n\n/* Small screens: allow smaller min width before wrapping */\n@media (max-width: 700px) {\n  [data-palette] .pv-grid {\n    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  }\n}\n',"",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,aAAa;EACb,gBAAgB;EAChB,cAAc;EACd,cAAc;EACd,WAAW;EACX;AACF;;AAEA;;;EAGE;AACF;;AAEA;;EAEE;AACF;;AAEA;EACE,SAAS;EACT,qBAAqB;EACrB,gBAAgB;EAChB;AACF;;AAEA,WAAW;AACX;EACE,aAAa;EACb,gCAAgC;EAChC,SAAS;EACT,kBAAkB;EAClB;AACF;;AAEA;EACE;AACF;;AAEA,yBAAyB;AACzB;EACE;IACE;EACF;AACF;;AAEA;EACE,aAAa;EACb,SAAS;EACT;AACF;;AAEA;EACE;AACF;;AAEA,mBAAmB;AACnB;;;;;;;EAOE,+BAA+B;EAC/B;AACF;;AAEA;;EAEE,cAAc;EACd,WAAW;EACX,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB;AACF;;AAEA,WAAW;AACX;EACE,aAAa;EACb;AACF;;AAEA;EACE,SAAS;EACT,4CAA4C;EAC5C;AACF;;AAEA;EACE,SAAS;EACT,mBAAmB;EACnB;AACF;;AAEA,aAAa;AACb;EACE,aAAa;EACb,SAAS;EACT,aAAa;EACb,oCAAoC;EACpC;AACF;;AAEA;EACE,aAAa;EACb;AACF;;AAEA;EACE,iBAAiB;EACjB;AACF;;AAEA;;;;EAIE,uBAAuB;EACvB,gBAAgB;EAChB,eAAe;EACf,kBAAkB;EAClB,+BAA+B;EAC/B,4BAA4B;EAC5B;AACF;;AAEA;EACE;AACF;;AAEA;;EAEE,qBAAqB;EACrB;AACF;;AAEA;EACE,WAAW;EACX;AACF;;AAEA,wCAAwC;AACxC,wDAAwD;AACxD;EACE,WAAW;EACX,eAAe;EACf,YAAY;EACZ,mBAAmB;EACnB;AACF;;AAEA;;EAEE;AACF;;AAEA,4CAA4C;;AAE5C;;EAEE,iBAAiB;EACjB,iBAAiB;EACjB,+BAA+B;EAC/B,4BAA4B;EAC5B,oCAAoC;EACpC,gBAAgB;EAChB;AACF;;;AAGA,wBAAwB;AACxB;EACE,gBAAgB;EAChB,gBAAgB;EAChB,kBAAkB;EAClB,gBAAgB;EAChB,wBAAwB;EACxB,qBAAqB;EACrB;AACF;;AAEA;;EAEE,gBAAgB;EAChB;AACF;;AAEA;EACE,aAAa;EACb;AACF;;AAEA,iBAAiB;AACjB;EACE,kBAAkB;EAClB;AACF;;AAEA;EACE,qBAAqB;EACrB,gBAAgB;EAChB,iBAAiB;EACjB;AACF;;AAEA;EACE;AACF;;AAEA,iBAAiB;AACjB;EACE,aAAa;EACb,8BAA8B;EAC9B,eAAe;EACf;AACF;;AAEA;EACE;IACE;EACF;AACF;;AAEA;EACE,aAAa;EACb,SAAS;EACT,aAAa;EACb;AACF;;AAEA;EACE,SAAS;EACT,gBAAgB;EAChB;AACF;;AAEA,UAAU;AACV;EACE,qBAAqB;EACrB;AACF;;AAEA;EACE;AACF;;AAEA,sCAAsC;AACtC;EACE,eAAe,IAAI,wBAAwB;EAC3C,aAAa,MAAM,4BAA4B;EAC/C,YAAY,OAAO,qDAAqD;AAC1E;;AAEA,sDAAsD;AACtD;EACE,8EAA8E;EAC9E,cAAc;EACd,kBAAkB;EAClB,eAAe,KAAK,uCAAuC;EAC3D,gBAAgB,IAAI,mBAAmB;EACvC,YAAY,QAAQ,qDAAqD;EACzE,4BAA4B;EAC5B,+BAA+B;EAC/B,uBAAuB;AACzB;;AAEA;EACE,oBAAoB,mCAAmC,0BAA0B;EACjF,6DAA6D;EAC7D,8BAA8B;EAC9B,kBAAkB;EAClB,sBAAsB,iCAAiC,kCAAkC;EACzF,oBAAoB;AACtB;;AAEA;EACE,qBAAqB;EACrB,sBAAsB;EACtB,kBAAkB;EAClB,+BAA+B;EAC/B,UAAU;EACV,uBAAuB;EACvB,eAAe;EACf,qDAAqD;AACvD;;AAEA;EACE,2BAA2B;EAC3B,qCAAqC;AACvC;;AAEA;EACE,0BAA0B;EAC1B,mBAAmB;AACrB;;AAEA,wDAAwD;AACxD;;;sCAGsC,wBAAwB,EAAE;;;AAGhE,2DAA2D;AAC3D;EACE;IACE,2DAA2D;EAC7D;AACF",sourcesContent:[':root {\r\n  --bg: #0b0b0b;\r\n  --fg: #f5f5f5;\r\n  --muted: #a3a3a3;\r\n  --stroke: #333;\r\n  --radius: 10px;\r\n  --gap: 16px;\r\n  color-scheme: dark\r\n}\r\n\r\n*,\r\n*::before,\r\n*::after {\r\n  box-sizing: border-box\r\n}\r\n\r\nhtml,\r\nbody {\r\n  height: 100%\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  background: var(--bg);\r\n  color: var(--fg);\r\n  font: 15px/1.6 "Courier New", Courier, monospace\r\n}\r\n\r\n/* Layout */\r\n.container {\r\n  display: grid;\r\n  grid-template-columns: 340px 1fr;\r\n  gap: 24px;\r\n  align-items: start;\r\n  padding: 16px\r\n}\r\n\r\n.container>* {\r\n  min-width: 0\r\n}\r\n\r\n/* prevent grid blowout */\r\n@media (max-width:900px) {\r\n  .container {\r\n    grid-template-columns: 1fr\r\n  }\r\n}\r\n\r\n.sidebar {\r\n  display: grid;\r\n  gap: 14px;\r\n  align-content: start\r\n}\r\n\r\n.preview {\r\n  min-width: 0\r\n}\r\n\r\n/* Shared surface */\r\n.controls,\r\n.status,\r\n.col,\r\n.log,\r\nimg,\r\ncanvas,\r\na {\r\n  border: 1px solid var(--stroke);\r\n  border-radius: var(--radius)\r\n}\r\n\r\nimg,\r\ncanvas {\r\n  display: block;\r\n  width: 100%;\r\n  height: auto;\r\n  background: var(--bg);\r\n  max-height: 85vh;\r\n  object-fit: contain\r\n}\r\n\r\n/* Header */\r\n.page-header {\r\n  display: grid;\r\n  gap: 6px\r\n}\r\n\r\n.page-header h1 {\r\n  margin: 0;\r\n  font-size: clamp(1.1rem, 1rem + 1vw, 1.6rem);\r\n  font-weight: 700\r\n}\r\n\r\n.subtitle {\r\n  margin: 0;\r\n  color: var(--muted);\r\n  font-size: .95rem\r\n}\r\n\r\n/* Controls */\r\n.controls {\r\n  display: grid;\r\n  gap: 12px;\r\n  padding: 12px;\r\n  background: rgba(255, 255, 255, .02);\r\n  grid-auto-rows: min-content\r\n}\r\n\r\n.control {\r\n  display: grid;\r\n  gap: 6px\r\n}\r\n\r\n.label {\r\n  font-size: .85rem;\r\n  color: var(--muted)\r\n}\r\n\r\ninput[type=file],\r\nselect,\r\nbutton,\r\na {\r\n  background: transparent;\r\n  color: var(--fg);\r\n  font-size: 14px;\r\n  padding: 10px 12px;\r\n  border: 1px solid var(--stroke);\r\n  border-radius: var(--radius);\r\n  max-width: 100%\r\n}\r\n\r\nbutton {\r\n  cursor: pointer\r\n}\r\n\r\nbutton:hover:not(:disabled),\r\na:hover {\r\n  background: var(--fg);\r\n  color: var(--bg)\r\n}\r\n\r\nbutton:disabled {\r\n  opacity: .6;\r\n  cursor: not-allowed\r\n}\r\n\r\n/* File input: truncate long filenames */\r\n/* Replace your file input block with this minimal set */\r\ninput[type=file] {\r\n  width: 100%;\r\n  max-width: 100%;\r\n  min-width: 0;\r\n  white-space: nowrap;\r\n  overflow: hidden\r\n}\r\n\r\ninput[type=file]:hover,\r\ninput[type=file]:focus {\r\n  overflow: auto\r\n}\r\n\r\n/* reveals full name via horizontal scroll */\r\n\r\ninput[type=file]::file-selector-button,\r\ninput[type=file]::-webkit-file-upload-button {\r\n  margin-right: 8px;\r\n  padding: 8px 10px;\r\n  border: 1px solid var(--stroke);\r\n  border-radius: var(--radius);\r\n  background: rgba(255, 255, 255, .06);\r\n  color: var(--fg);\r\n  cursor: pointer\r\n}\r\n\r\n\r\n/* Select (dark popup) */\r\nselect {\r\n  background: #111;\r\n  color: var(--fg);\r\n  color-scheme: dark;\r\n  appearance: none;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  white-space: nowrap\r\n}\r\n\r\nselect option,\r\nselect optgroup {\r\n  background: #111;\r\n  color: var(--fg)\r\n}\r\n\r\nselect:focus {\r\n  outline: none;\r\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, .08) inset\r\n}\r\n\r\n/* Status + log */\r\n.status {\r\n  padding: 10px 12px;\r\n  background: rgba(255, 255, 255, .04)\r\n}\r\n\r\n.log {\r\n  white-space: pre-wrap;\r\n  font-size: .9rem;\r\n  padding: 8px 10px;\r\n  display: none\r\n}\r\n\r\n.log:not(:empty) {\r\n  display: block\r\n}\r\n\r\n/* Preview area */\r\n.row {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: var(--gap);\r\n  align-items: start\r\n}\r\n\r\n@media (max-width:900px) {\r\n  .row {\r\n    grid-template-columns: 1fr\r\n  }\r\n}\r\n\r\n.col {\r\n  display: grid;\r\n  gap: 12px;\r\n  padding: 12px;\r\n  background: rgba(255, 255, 255, .02)\r\n}\r\n\r\n.col h3 {\r\n  margin: 0;\r\n  font-weight: 700;\r\n  font-size: 1rem\r\n}\r\n\r\n/* Utils */\r\na {\r\n  text-decoration: none;\r\n  display: inline-block\r\n}\r\n\r\n.hidden {\r\n  display: none !important\r\n}\r\n\r\n/* ===== Compact Palette Board ===== */\r\n:root{\r\n  --pv-tile: 32px;   /* size of each square */\r\n  --pv-gap: 8px;     /* spacing between squares */\r\n  --pv-cols: 8;      /* default columns; change per container if desired */\r\n}\r\n\r\n/* Scope the board with data-palette and .pv-compact */\r\n[data-palette].pv-compact {\r\n  /* allow grid to be only as wide as its content (so it doesn\'t fill the row) */\r\n  display: block;\r\n  width: max-content;\r\n  max-width: 100%;    /* prevent overflow on tiny viewports */\r\n  overflow: hidden;   /* clip if needed */\r\n  padding: 6px;       /* optional inner padding to match your box drawing */\r\n  border-radius: var(--radius);\r\n  border: 1px solid var(--stroke);\r\n  background: transparent;\r\n}\r\n\r\n[data-palette].pv-compact .pv-grid{\r\n  display: inline-grid;                                  /* grid sizes to content */\r\n  grid-template-columns: repeat(var(--pv-cols), var(--pv-tile));\r\n  grid-auto-rows: var(--pv-tile);\r\n  gap: var(--pv-gap);\r\n  justify-content: start;                                /* leftover space stays on right */\r\n  align-content: start;\r\n}\r\n\r\n[data-palette].pv-compact .pv-item{\r\n  width: var(--pv-tile);\r\n  height: var(--pv-tile);\r\n  border-radius: 4px;\r\n  border: 1px solid var(--stroke);\r\n  padding: 0;\r\n  background: transparent;\r\n  cursor: pointer;\r\n  transition: transform .06s ease, box-shadow .06s ease;\r\n}\r\n\r\n[data-palette].pv-compact .pv-item:hover{\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 6px rgba(0,0,0,.25);\r\n}\r\n\r\n[data-palette].pv-compact .pv-item:focus-visible{\r\n  outline: 2px solid #4C9AFF;\r\n  outline-offset: 2px;\r\n}\r\n\r\n/* we only show the swatch; hide any labels if present */\r\n[data-palette].pv-compact .pv-labels,\r\n[data-palette].pv-compact .pv-name,\r\n[data-palette].pv-compact .pv-rgba,\r\n[data-palette].pv-compact .pv-title { display: none !important; }\r\n\r\n\r\n/* Small screens: allow smaller min width before wrapping */\r\n@media (max-width: 700px) {\r\n  [data-palette] .pv-grid {\r\n    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\r\n  }\r\n}\r\n'],sourceRoot:""}]);const s=o},314:e=>{e.exports=function(e){var r=[];return r.toString=function(){return this.map(function(r){var n="",t=void 0!==r[5];return r[4]&&(n+="@supports (".concat(r[4],") {")),r[2]&&(n+="@media ".concat(r[2]," {")),t&&(n+="@layer".concat(r[5].length>0?" ".concat(r[5]):""," {")),n+=e(r),t&&(n+="}"),r[2]&&(n+="}"),r[4]&&(n+="}"),n}).join("")},r.i=function(e,n,t,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(t)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var A=0;A<e.length;A++){var p=[].concat(e[A]);t&&o[p[0]]||(void 0!==i&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=i),n&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=n):p[2]=n),a&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=a):p[4]="".concat(a)),r.push(p))}},r}},354:e=>{e.exports=function(e){var r=e[1],n=e[3];if(!n)return r;if("function"==typeof btoa){var t=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t),i="/*# ".concat(a," */");return[r].concat([i]).join("\n")}return[r].join("\n")}},540:e=>{e.exports=function(e){var r=document.createElement("style");return e.setAttributes(r,e.attributes),e.insert(r,e.options),r}},659:e=>{var r={};e.exports=function(e,n){var t=function(e){if(void 0===r[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}r[e]=n}return r[e]}(e);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var r=e.insertStyleElement(e);return{update:function(n){!function(e,r,n){var t="";n.supports&&(t+="@supports (".concat(n.supports,") {")),n.media&&(t+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(t+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),t+=n.css,a&&(t+="}"),n.media&&(t+="}"),n.supports&&(t+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),r.styleTagTransform(t,e,r.options)}(r,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)}}}}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var i=r[t]={id:t,exports:{}};return e[t](i,i.exports,n),i.exports}n.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return n.d(r,{a:r}),r},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.nc=void 0;const t={name:"",names:[],rgba:[],buffer:new Uint8Array([]),size:0},a=e=>Number.isInteger(e)&&e>=0&&e<=255,i=e=>Array.isArray(e)&&4===e.length&&e.every(a),o=(e,r,n)=>{const t=4*n;return r[t+0]=e[0],r[t+1]=e[1],r[t+2]=e[2],r[t+3]=e[3],r},s=e=>null!=e&&"object"==typeof e&&"fileString"in e;class l{constructor(){this.JSONParser=(e,r)=>{s(e)||r.ErrorCallBack("@JSONParser : A image result was passed, This should not happen.");const n=e;let t,a="";try{t=JSON.parse(n.fileString)}catch(e){r.ErrorCallBack("@JSONParser : JSON is invalid")}"object"==typeof t&&null!==t||r.ErrorCallBack("@JSONParser : JSON must be an object with paletteName and entries"),a=t.paletteName?t.paletteName:n.fileName,t.paletteName&&"string"!=typeof t.paletteName&&r.ErrorCallBack("@JSONParser : paletteName must be a string"),t.entries||r.ErrorCallBack("@JSONParser : Palette must have entries"),Array.isArray(t.entries)||r.ErrorCallBack("@JSONParser : entries must be an array"),0===t.entries.length&&r.ErrorCallBack("@JSONParser : entries array is empty");const l=t.entries,A=l.length,p=new Array(A),d=new Array(A);let c=new Uint8Array(4*A);for(let e=0;e<A;e++){const n=l[e];p[e]=n.name;const t=n.rgba;i(t)||r.ErrorCallBack("@JSONParser : entry is not a RGBA value"),d[e]=t,c=o(d[e],c,e)}return{name:a,names:p,rgba:d,buffer:c,size:A}},this.ASEParser=(e,r)=>(s(e)||r.ErrorCallBack("@ASEParser : A image result was passed, This should not happen."),r.ErrorCallBack("@ASEParser : This code is incomplete.. We cannot parse .ASE files yet, please export to another format"),t),this.HEXParser=(e,r)=>{s(e)||r.ErrorCallBack("@HEXParser : An image result was passed. This should not happen.");const n=e.fileString.trim().split(/\r?\n/).map(e=>e.trim()).filter(e=>e.length>0&&!e.startsWith(";")&&!e.startsWith("//")),t=/^#?[0-9a-fA-F]{6}$/,a=n.filter(e=>t.test(e));0===a.length&&r.ErrorCallBack("@HEXParser : No valid hex color entries found (expected RRGGBB or #RRGGBB).");const l=a.length,A=new Array(l);let p=new Uint8Array(4*l);for(let e=0;e<l;e++){const n=a[e].replace(/^#/,""),t=[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16),255];i(t)||r.ErrorCallBack(`@HEXParser : Entry ${e} is not a valid RGBA value.`),A[e]=t,p=o(A[e],p,e)}return{name:e.fileName.split(".")[0],names:[],rgba:A,buffer:p,size:l}},this.IMGParser=(e,r)=>(s(e)||r.ErrorCallBack("@IMGParser : A image result was passed, This should not happen."),t),this.PaintParser=(e,r)=>{s(e)||r.ErrorCallBack("@PaintParser : An image result was passed. This should not happen.");const n=e.fileString.trim().split(/\r?\n/);0!==n.length&&";paint.net Palette File"===n[0].trim()||r.ErrorCallBack("@PaintParser : File invalid, does not start with ';paint.net Palette File' marker.");const t=n.map(e=>e.trim()),a=e=>{const r=`;${e}:`,n=t.find(e=>e.toLowerCase().startsWith(r.toLowerCase()));return n?n.slice(r.length).trim():null},l=a("Palette Name")??"";l||r.ErrorCallBack("@PaintParser : File invalid, does not have a palette name.");const A=a("Colors");A||r.ErrorCallBack("@PaintParser : File invalid, does not have a ';Colors: <n>' line.");const p=parseInt(A,10);(!Number.isFinite(p)||p<=0)&&r.ErrorCallBack("@PaintParser : Colors count is not a positive integer.");const d=t.filter(e=>e&&!e.startsWith(";")),c=/^[0-9a-fA-F]{8}$/,g=d.filter(e=>c.test(e));g.length<p&&r.ErrorCallBack(`@PaintParser : Declared ${p} colors but found only ${g.length} color entries.`);const m=new Array(p);let u=new Uint8Array(4*p);for(let e=0;e<p;e++){const n=g[e],t=parseInt(n,16),a=[t>>>16&255,t>>>8&255,255&t,t>>>24&255];i(a)||r.ErrorCallBack(`@PaintParser : Entry ${e} is not a valid RGBA value.`),m[e]=a,u=o(m[e],u,e)}return{name:l,names:[],rgba:m,buffer:u,size:p}},this.GPLParser=(e,r)=>{s(e)||r.ErrorCallBack("@GPLParser : A image result was passed, This should not happen.");const n=e.fileString.trim().split(/\r?\n/);"GIMP Palette"!==n[0]&&r.ErrorCallBack("@GPLParser  : A file invalid, does not start with 'GIMP Palette' Marker.");let t=n[1].split(/:\s*/);2!=t.length&&r.ErrorCallBack("@GPLParser : A file invalid, does not have a palette name.");const a=t[1];t=n[3].split(/:\s*/),2!=t.length&&r.ErrorCallBack("@GPLParser : A file invalid, does not have a number of colors in the palette.");const l=parseInt(t[1]),A=new Array(l);let p=new Uint8Array(4*l);for(let e=0;e<l;e++){const t=n[4+e].split(/\s+/),a=[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),255];i(a)||r.ErrorCallBack("@GPLParser : entry is not a RGBA value"),A[e]=a,p=o(A[e],p,e)}return{name:a,names:[],rgba:A,buffer:p,size:l}},this.JASCParser=(e,r)=>{s(e)||r.ErrorCallBack("@JASCParser : A image result was passed, This should not happen.");const n=e.fileString.trim().split(/\r?\n/);"JASC-PAL"!==n[0]&&r.ErrorCallBack("@JASCParser : A file invalid, does not start with JASC-PAL Marker."),"0100"!==n[1]&&r.ErrorCallBack("@JASCParser : A file invalid, not correct version 0100.");const t=parseInt(n[2]),a=new Array(t);let l=new Uint8Array(4*t);for(let e=0;e<t;e++){const t=n[3+e].split(/\s+/),s=[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),255];i(s)||r.ErrorCallBack("@JASCParser : entry is not a RGBA value"),a[e]=s,l=o(a[e],l,e)}return{name:"",names:[],rgba:a,buffer:l,size:t}},this.parserByExt=new Map([["json",this.JSONParser],["hex",this.HEXParser],["gpl",this.GPLParser],["pal",this.JASCParser],["txt",this.PaintParser]]),this.getParser=e=>this.parserByExt.get(e)}}class A{constructor(){this.parsers=new l}CreatePalette(e,r){if(null!=(n=e)&&"object"==typeof n&&"imageBitMap"in n)return t;var n;const a=e,i=a.fileName.includes(".")?a.fileName.split(".").pop().toLowerCase():"";let o=this.parsers.getParser(i);return null==o&&r.ErrorCallBack(`@PaletteFactory : We don't have a parser for this extension '${i}'..`),o(e,r)}CreateDefaultPalette(e,r){let n={fileName:"Default",fileString:e};return this.parsers.getParser("json")(n,r)}}class p{static getInstance(){return this.instance||(this.instance=new p),this.instance}constructor(){this.fileIO=d("#file"),this.paletteFileIO=d("#palette-file"),this.runBtn=d("#run"),this.orgImgElem=d("#original"),this.downloadBtn=d("#download"),this.logElem=d("#log"),this.statusElem=d("#status"),this.paletteGrid=d("#palette-grid"),this.originalCol=d("#original-col"),this.processedCol=d("#processed-col"),this.paletteGridElem=d("#palette-grid"),this.paletteViewElem=d("#palette-view"),this.paletteUploadElem=d("#palette-file-upload"),this.filterSelector=d("#filter-mode"),this.paletteSelector=d("#palette-selector"),this.toggleHiddenOriginalCol=e=>e?this.originalCol.classList.add("hidden"):this.originalCol.classList.remove("hidden"),this.toggleHiddenPaletteView=e=>e?this.paletteViewElem.classList.add("hidden"):this.paletteViewElem.classList.remove("hidden"),this.toggleHiddenProcessedCol=e=>e?this.processedCol.classList.add("hidden"):this.processedCol.classList.remove("hidden"),this.toggleHiddenPaletteFileUpload=e=>e?this.paletteUploadElem.classList.add("hidden"):this.paletteUploadElem.classList.remove("hidden"),this.setStatus=e=>this.statusElem.textContent=e,this.logError=e=>this.logElem.textContent=e||"",this.ErrorCallBack=e=>{throw this.logError(e),new Error(e)},this.toggleHiddenOriginalCol(!0),this.toggleHiddenPaletteView(!0),this.toggleHiddenProcessedCol(!0),this.toggleHiddenPaletteFileUpload(!0),this.filterSelector.selectedIndex=0,this.paletteSelector.selectedIndex=0}}const d=e=>document.querySelector(e);class c{static readImage(e,r){return new Promise((n,t)=>{r.logError(""),r.setStatus("Loading image.."),createImageBitmap(e,{imageOrientation:"from-image"}).then(t=>{const a={imageBitMap:t,fileName:e.name,width:t.width,height:t.height};r.orgImgElem.src=URL.createObjectURL(e),r.runBtn.disabled=!1,r.setStatus(`Image loaded: ${t.width}x${t.height}. Click "Run Shader".`),r.toggleHiddenOriginalCol(!1),n(a)}).catch(e=>{r.runBtn.disabled=!0,r.ErrorCallBack("@ handleFileIO :\n"+e),t(e)})})}static readFile(e,r){return new Promise((n,t)=>{r.logError(""),r.setStatus("Loading text file.."),new Promise((r,n)=>{const t=new FileReader;t.onload=()=>r(t.result),t.onerror=()=>n(t.error),t.readAsText(e)}).then(t=>{const a={fileName:e.name,fileString:t};r.setStatus(`File loaded: ${e.name} (${e.size} bytes)`),n(a)}).catch(e=>{r.runBtn.disabled=!0,r.ErrorCallBack("@ handleFileIO :\n"+e),t(e)})})}}const g=(e,r)=>{if(!r.paletteGridElem)return void r.ErrorCallBack("@ renderPalette: #palette-grid not found in DOM");r.paletteGridElem.setAttribute("data-palette",""),r.paletteGridElem.innerHTML="";const n=document.createElement("div");n.className="pv-title",n.textContent=e.name,r.paletteGridElem.appendChild(n);const t=document.createElement("div");t.className="pv-grid",r.paletteGridElem.appendChild(t);for(let r=0;r<e.rgba.length;r++){const n=e.names[r],[a,i,o,s]=e.rgba[r],l=document.createElement("button");l.type="button",l.className="pv-item",l.title=`${n} — rgba(${a}, ${i}, ${o}, ${s})`,l.style.background=`rgba(${a}, ${i}, ${o}, ${s/255})`,l.addEventListener("click",async()=>{const e=`rgba(${a}, ${i}, ${o}, ${(s/255).toFixed(3)})`;try{await navigator.clipboard.writeText(e)}catch{}}),t.appendChild(l)}r.toggleHiddenPaletteView(!1)};class m{constructor(e="",r="",n,t){this.uniforms={},this.vao=null,this.attributes={},this.program=h(e,r,n,t)}}const u=(e,r,n,t)=>{const a=e.getUniformLocation(r.program,n);null===a&&t&&t("@ getUniform : uniform "+n+" not found or optimized out"),r.uniforms[n]=a},E=(e,r,n,t)=>{const a=e.getAttribLocation(r.program,n);-1===a&&t&&t("@ getAttrib : attribute "+n+" not found or optimized out"),r.attributes[n]=a},h=(e="",r="",n,t)=>{0==e.length&&(e="#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 a_position;\r\nout vec2 v_uv;\r\n\r\nvoid main() {\r\n    v_uv = (a_position * 0.5) + 0.5;\r\n    gl_Position = vec4(a_position, 0.0, 1.0);\r\n}\r\n"),0==r.length&&(r="#version 300 es\r\nprecision mediump float;\r\n\r\nuniform sampler2D u_image;\r\n\r\nin vec2 v_uv;\r\nout vec4 outColor;\r\n\r\nvoid main() {\r\n    vec2 uv = vec2(v_uv.x, 1.0 - v_uv.y);\r\n    vec4 c = texture(u_image, uv);\r\n\r\n    outColor = vec4(1.0 - c.rgb, c.a);\r\n}\r\n");const a=f(e,n.VERTEX_SHADER,n,t),i=f(r,n.FRAGMENT_SHADER,n,t),o=n.createProgram();o||t?.("@ createShaderProgram : gl.createProgram:");const s=o;if(n.attachShader(s,a),n.attachShader(s,i),n.linkProgram(s),!n.getProgramParameter(s,n.LINK_STATUS)){const e=n.getProgramInfoLog(s)??"Unknown shader error";n.deleteProgram(s),t?.("@ createShaderProgram : gl.linkProgram:\n"+e)}return s},f=(e,r,n,t)=>{const a=n.createShader(r);a||t?.("@ compileShader : gl.createShaderFailed");const i=a;if(n.shaderSource(i,e),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){const e=n.getShaderInfoLog(i)??"Unknown shader error";n.deleteShader(i),t?.("@ compileShader : gl.compileShader:\n"+e)}return i};class C{runProg(){const e=this.gl,r=this.html,n=this.shaderSelect,t=this.shaderProgs[n];if(this.imageBitmap)if(n<0)r.setStatus("Please select a filter first");else try{if(!t||!t.uniforms)throw new Error("Program not initialized");const a=((e,r,n)=>{const t=r.createTexture();return t||n?.("@ createTextureFromBitmap : gl.createTexture:"),r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),t})(this.imageBitmap,e,this.html.ErrorCallBack);let i=this.programPalettes[this.paletteIdx];if(console.log(this.programPalettes[this.paletteIdx]),console.log(this.paletteIdx),console.log(this.programPalettes),null==i&&1==n)return void r.setStatus("Please select a palette");let o=null;e.useProgram(t.program),e.bindVertexArray(t.vao),i&&(o=((e,r,n)=>{const t=r.createTexture();return t||n?.("@ createPaletteTexture : gl.createTexture:"),r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_ALIGNMENT,1),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA8,e.buffer.length/4,1,0,r.RGBA,r.UNSIGNED_BYTE,e.buffer),t})(i,e,this.html.ErrorCallBack),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o),t.uniforms.u_palette&&e.uniform1i(t.uniforms.u_palette,1),t.uniforms.u_paletteSize&&e.uniform1i(t.uniforms.u_paletteSize,i.size)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a),t.uniforms.u_image&&e.uniform1i(t.uniforms.u_image,0),e.viewport(0,0,this.canvas.width,this.canvas.height),e.drawArrays(e.TRIANGLES,0,6),e.bindVertexArray(null),this.canvas.toBlob(e=>{if(!e)return;const n=URL.createObjectURL(e);r.downloadBtn.href=n,r.downloadBtn.classList.remove("hidden")},"image/png"),r.setStatus("Done! Shader result shown. Download available."),r.toggleHiddenProcessedCol(!1),e.deleteTexture(a),i&&e.deleteTexture(o)}catch(e){r.ErrorCallBack("@ runProg : \n"+e)}else r.setStatus("Please upload an image first.")}setImageProperties(e){this.imageBitmap=e.imageBitMap,this.canvas.width=e.width,this.canvas.height=e.height}addPalette(e){this.programPalettes[1]=e,g(this.programPalettes[this.paletteIdx],this.html)}setShaderSelection(e){const r=this.html;e<0&&r.setStatus("Please Select a filter to use"),1==e&&this.programPalettes?r.toggleHiddenPaletteView(!1):r.toggleHiddenPaletteView(!0),this.shaderSelect=e}setPalette(e){const r=this.html;this.paletteIdx=e,(e=>{if(!e.paletteGridElem)return void e.ErrorCallBack("@ clearPalette: #palette-grid not found in DOM");const r=e.paletteGridElem.querySelector(".pv-grid");r&&(r.innerHTML="");const n=e.paletteGridElem.querySelector(".pv-title");n&&(n.textContent="")})(r),null!=this.programPalettes[this.paletteIdx]?g(this.programPalettes[this.paletteIdx],this.html):r.setStatus("Please upload a palette")}static getInstance(){return C.instance||(C.instance=new C),C.instance}constructor(){this.canvas=d("#glcanvas"),this.gl=this.canvas.getContext("webgl2"),this.imageBitmap=null,this.shaderProgs=[],this.shaderSelect=-1,this.programPalettes=[],this.paletteIdx=-1,this.html=p.getInstance(),this.paletteFactory=new A;const e=this.gl,r=this.html,n=this.paletteFactory;e||(r.setStatus("WebGL is not supported in this browser, this app will not work. Please use a browser that allows WebGL"),r.runBtn.disabled=!0);const t=n.CreateDefaultPalette('{\n"paletteName": "Wplace Palette",\n  "entries": [\n        { "name": "BLACK", "rgba": [0, 0, 0, 255] },\n        { "name": "DARK_GRAY", "rgba": [60, 60, 60, 255] },\n        { "name": "GRAY", "rgba": [120, 120, 120, 255] },\n        { "name": "MEDIUM_GRAY", "rgba": [170, 170, 170, 255] },\n        { "name": "LIGHT_GRAY", "rgba": [210, 210, 210, 255] },\n        { "name": "WHITE", "rgba": [255, 255, 255, 255] },\n        { "name": "DEEP_RED", "rgba": [96, 0, 24, 255] },\n        { "name": "DARK_RED", "rgba": [165, 14, 30, 255] },\n        { "name": "RED", "rgba": [237, 28, 36, 255] },\n        { "name": "LIGHT_RED", "rgba": [250, 128, 114, 255] },\n        { "name": "DARK_ORANGE", "rgba": [228, 92, 26, 255] },\n        { "name": "ORANGE", "rgba": [255, 127, 39, 255] },\n        { "name": "GOLD", "rgba": [246, 170, 9, 255] },\n        { "name": "YELLOW", "rgba": [249, 221, 59, 255] },\n        { "name": "LIGHT_YELLOW", "rgba": [255, 250, 188, 255] },\n        { "name": "DARK_GOLDENROD", "rgba": [156, 132, 49, 255] },\n        { "name": "GOLDENROD", "rgba": [197, 173, 49, 255] },\n        { "name": "LIGHT_GOLDENROD", "rgba": [232, 212, 95, 255] },\n        { "name": "DARK_OLIVE", "rgba": [74, 107, 58, 255] },\n        { "name": "OLIVE", "rgba": [90, 148, 74, 255] },\n        { "name": "LIGHT_OLIVE", "rgba": [132, 197, 115, 255] },\n        { "name": "DARK_GREEN", "rgba": [14, 185, 104, 255] },\n        { "name": "GREEN", "rgba": [19, 230, 123, 255] },\n        { "name": "LIGHT_GREEN", "rgba": [135, 255, 94, 255] },\n        { "name": "DARK_TEAL", "rgba": [12, 129, 110, 255] },\n        { "name": "TEAL", "rgba": [16, 174, 166, 255] },\n        { "name": "LIGHT_TEAL", "rgba": [19, 225, 190, 255] },\n        { "name": "DARK_CYAN", "rgba": [15, 121, 159, 255] },\n        { "name": "CYAN", "rgba": [96, 247, 242, 255] },\n        { "name": "LIGHT_CYAN", "rgba": [187, 250, 242, 255] },\n        { "name": "DARK_BLUE", "rgba": [40, 80, 158, 255] },\n        { "name": "BLUE", "rgba": [64, 147, 228, 255] },\n        { "name": "LIGHT_BLUE", "rgba": [125, 199, 255, 255] },\n        { "name": "DARK_INDIGO", "rgba": [77, 49, 184, 255] },\n        { "name": "INDIGO", "rgba": [107, 80, 246, 255] },\n        { "name": "LIGHT_INDIGO", "rgba": [153, 177, 251, 255] },\n        { "name": "DARK_SLATE_BLUE", "rgba": [74, 66, 132, 255] },\n        { "name": "SLATE_BLUE", "rgba": [122, 113, 196, 255] },\n        { "name": "LIGHT_SLATE_BLUE", "rgba": [181, 174, 241, 255] },\n        { "name": "DARK_PURPLE", "rgba": [120, 12, 153, 255] },\n        { "name": "PURPLE", "rgba": [170, 56, 185, 255] },\n        { "name": "LIGHT_PURPLE", "rgba": [224, 159, 249, 255] },\n        { "name": "DARK_PINK", "rgba": [203, 0, 122, 255] },\n        { "name": "PINK", "rgba": [236, 31, 128, 255] },\n        { "name": "LIGHT_PINK", "rgba": [243, 141, 169, 255] },\n        { "name": "DARK_PEACH", "rgba": [155, 82, 73, 255] },\n        { "name": "PEACH", "rgba": [209, 128, 120, 255] },\n        { "name": "LIGHT_PEACH", "rgba": [250, 182, 164, 255] },\n        { "name": "DARK_BROWN", "rgba": [104, 70, 52, 255] },\n        { "name": "BROWN", "rgba": [149, 104, 42, 255] },\n        { "name": "LIGHT_BROWN", "rgba": [219, 164, 99, 255] },\n        { "name": "DARK_TAN", "rgba": [123, 99, 82, 255] },\n        { "name": "TAN", "rgba": [156, 132, 107, 255] },\n        { "name": "LIGHT_TAN", "rgba": [214, 181, 148, 255] },\n        { "name": "DARK_BEIGE", "rgba": [209, 128, 81, 255] },\n        { "name": "BEIGE", "rgba": [248, 178, 119, 255] },\n        { "name": "LIGHT_BEIGE", "rgba": [255, 197, 165, 255] },\n        { "name": "DARK_STONE", "rgba": [109, 100, 63, 255] },\n        { "name": "STONE", "rgba": [148, 140, 107, 255] },\n        { "name": "LIGHT_STONE", "rgba": [205, 197, 158, 255] },\n        { "name": "DARK_SLATE", "rgba": [51, 57, 65, 255] },\n        { "name": "SLATE", "rgba": [109, 117, 141, 255] },\n        { "name": "LIGHT_SLATE", "rgba": [179, 185, 209, 255] },\n        { "name": "TRANSPARENT", "rgba": [0, 0, 0, 0] }\n    ]\n}',r);this.programPalettes.push(t),this.shaderProgs=((e,r)=>{const n=new m("","#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 v_uv;\r\nout vec4 out_color;\r\n\r\nuniform sampler2D u_image;     // source image (RGBA8)\r\nuniform sampler2D u_palette;   // N x 1 palette (RGBA8, NEAREST)\r\nuniform int u_paletteSize;     // N\r\n\r\n#ifndef MAX_PAL\r\n#define MAX_PAL 1024           // safety cap for loop unrolling\r\n#endif\r\n\r\nvoid main() {\r\n  vec2 uv = vec2(v_uv.x, 1.0 - v_uv.y);\r\n  vec4 src = texture(u_image, uv).rgba;\r\n\r\n  float best = 1e30;\r\n  int bestIdx = 0;\r\n\r\n  // over palette using squared Euclidean distance in sRGB\r\n  for (int i = 0; i < MAX_PAL; ++i) {\r\n    if (i >= u_paletteSize) break;\r\n    vec4 pal = texelFetch(u_palette, ivec2(i, 0), 0).rgba;\r\n    vec4 d = src - pal;\r\n    float dist2 = dot(d, d);\r\n    if (dist2 < best) {\r\n      best = dist2;\r\n      bestIdx = i;\r\n    }\r\n  }\r\n\r\n  out_color = texelFetch(u_palette, ivec2(bestIdx, 0), 0);\r\n}\r\n",e,r);e.useProgram(n.program),u(e,n,"u_image",r),u(e,n,"u_palette",r),u(e,n,"u_paletteSize",r),E(e,n,"a_position",r),e.uniform1i(n.uniforms.u_image,0),e.uniform1i(n.uniforms.u_palette,1);const t=new m("","",e,r);return e.useProgram(t.program),u(e,t,"u_image",r),E(e,t,"a_position",r),e.uniform1i(t.uniforms.u_image,0),e.useProgram(null),[t,n]})(e,r.ErrorCallBack);const a=e.createBuffer();if(!a)throw new Error("createBuffer failed");e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.shaderProgs.forEach(n=>{((e,r,n,t)=>{const a=e.createVertexArray();if(!a)return void t?.("@ setupVAO : failed to create VAO");e.bindVertexArray(a),e.useProgram(r.program);const i=r.attributes.a_position;void 0===i||-1===i?t?.("@ getAttrib : attribute a_position not found or optimized out"):(e.bindBuffer(e.ARRAY_BUFFER,n),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0)),e.bindVertexArray(null),r.vao=a})(e,n,a,r.ErrorCallBack)})}}var b=n(72),v=n.n(b),B=n(825),w=n.n(B),x=n(659),P=n.n(x),y=n(56),T=n.n(y),S=n(540),_=n.n(S),k=n(113),I=n.n(k),R=n(208),L={};L.styleTagTransform=I(),L.setAttributes=T(),L.insert=P().bind(null,"head"),L.domAPI=w(),L.insertStyleElement=_(),v()(R.A,L),R.A&&R.A.locals&&R.A.locals,document.addEventListener("DOMContentLoaded",()=>{const e=C.getInstance(),r=p.getInstance(),n=new A;r.fileIO.addEventListener("change",async()=>{r.toggleHiddenProcessedCol(!0);const n=r.fileIO.files?.[0];if(!n)return;const t=await c.readImage(n,r);e.setImageProperties(t)}),r.paletteFileIO.addEventListener("change",async()=>{const t=r.paletteFileIO.files?.[0];if(!t)return;const a=await c.readFile(t,r);console.log(a);const i=n.CreatePalette(a,r);e.addPalette(i)}),r.runBtn.addEventListener("click",()=>e.runProg()),r.filterSelector.addEventListener("change",r=>{const n=r.target;e.setShaderSelection(n.selectedIndex-1)}),r.paletteSelector.addEventListener("change",n=>{const t=n.target;"Custom"===t.value?r.toggleHiddenPaletteFileUpload(!1):r.toggleHiddenPaletteFileUpload(!0),console.log(t.selectedIndex-1),e.setPalette(t.selectedIndex-1)})})})();
//# sourceMappingURL=bundle.f2afb5e865a9c70aa7cc.js.map